import 'package:flutter_test/flutter_test.dart';
import 'package:union_shop/models/product_box.dart';
import 'package:union_shop/models/product.dart';
import 'package:flutter/material.dart';

void main() {
	testWidgets('ProductBox displays product title and price', (WidgetTester tester) async {
		final product = Product(
			title: 'Test Product',
			image: 'https://via.placeholder.com/150',
			description: 'A test product',
			categories: ['Test'],
			price: 19.99,
		);
		await tester.pumpWidget(MaterialApp(home: ProductBox(product: product)));
		expect(find.text('Test Product'), findsOneWidget);
		expect(find.text('£19.99'), findsOneWidget);
	});

	testWidgets('ProductBox displays sale price if isSale and category is Sale', (WidgetTester tester) async {
		final product = Product(
			title: 'Sale Product',
			image: 'https://via.placeholder.com/150',
			description: 'A sale product',
			categories: ['Sale'],
			price: 40.0,
		);
		await tester.pumpWidget(MaterialApp(home: ProductBox(product: product, isSale: true)));
		expect(find.text('Sale Product'), findsOneWidget);
		expect(find.text('£20.00 (50% off)'), findsOneWidget);
	});
}
